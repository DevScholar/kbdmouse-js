/* Global animation effects */
@keyframes keyPress {
  0% {
    transform: translateY(0) scale(1);
  }

  50% {
    transform: translateY(1px) scale(0.99);
  }

  100% {
    transform: translateY(0) scale(1);
  }
}

virtual-keyboard {
  display: inline-block;
  border-collapse: separate;
  border-spacing: 0;
  background: black;
  padding: .25em;
}

virtual-keyboard .table-row {
  display: table-row;
}

virtual-keyboard .table-cell {
  display: table-cell;
  vertical-align: top;
}

.keyboard-container {
  display: flex;
  flex-direction: column;
  gap: 4px;
  background: #1e1e1e;
  padding: 8px;
  border-radius: 0;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.3);
  width: auto;
  max-width: none;
  height: auto;
  transform-origin: top left;
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  color: #ffffff;
  border: 1px solid #333333;
  overflow: hidden;
}

/* Keyboard row styles */
.keyboard-row {
  display: flex;
  gap: 6px;
  margin-bottom: 6px;
  justify-content: space-between;
  flex-wrap: nowrap;
  white-space: nowrap;
  width: auto;
  max-width: none;
  overflow: hidden;
  padding: 0 4px;
}

/* Sub-keyboard container layout - fix wrapping issue */
.keyboard-row-container {
  display: flex;
  flex-direction: row;
  gap: 20px;
  width: auto;
  max-width: none;
  align-items: flex-start;
  justify-content: flex-start;
  flex-wrap: nowrap;
}

.main-keyboard,
.numeric-keypad {
  margin: 1em;
}


virtual-key {
  background-color: #1e1e1e;
  color: white;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  border-radius: 4px;
  min-width: 40px;
  min-height: 40px;
  text-align: center;
  line-height: 1.2;
  flex: 1;
  padding: 4px;
  gap: 2px;

  &:hover {
    background-color: white;
    color: black;
  }

  /* Key down state - includes both physical press and toggle active state */
  &.key-down {
    background-color: #4a90e2;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
    transform: translateY(1px);
  }

  /* Vertically align virtual key content - auto-adjust using flexbox */
  .shift-text {
    color: gray;
    font-size: 0.75em;
    line-height: 1;
    /* When shift-text is hidden, it takes up no space */
    &:not([style*="display: none"]) {
      /* Normal display styles */
    }
  }

  .main-text {
    font-size: 1em;
    line-height: 1;
    font-weight: normal;
  }

  /* Only when code starts with Digit (i.e., number keys 0-9) does shift state swap primary/secondary text colors */
  &[code^="Digit"].shift .shift-text {
    color: white;
  }

  &[code^="Digit"].shift .main-text {
    color: gray;
  }
  /* Letter keys display main text as uppercase in shift state, no color change */
  &[code^="Key"].shift:not(.caps-lock) .main-text {
    text-transform: uppercase;
  }

  /* When both caps-lock and shift exist, main text displays as lowercase */
  &[code^="Key"].shift.caps-lock .main-text {
    text-transform: lowercase;
  }
  /* Letter keys hide shift-text by default */
  &[code^="Key"] .shift-text {
    display: none;
  }
  
  /* Visual feedback for letter keys in Caps Lock state */
  &[code^="Key"].caps-lock:not(.shift) .main-text {
    text-transform: uppercase;
  }
  
  /* When Caps Lock is active, add special style to the Caps Lock key itself */
  &[code="CapsLock"].key-down {
    background-color: #ff6b35;
    box-shadow: inset 0 3px 6px rgba(0, 0, 0, 0.4);
  }
  
  /* Visual feedback for numpad number keys in Num Lock state - similar to Shift+number key style */
  &[code^="Numpad"].num-lock:not(.shift) .main-text {
    /* Number mode: main text (numbers) displays as white active state */
    color: white;
    font-weight: normal;
  }

  &[code^="Numpad"].num-lock:not(.shift) .shift-text {
    /* Number mode: shift text (navigation functions) displays as gray secondary state */
    color: gray;
    font-size: 0.75em;
  }
  
  /* When NumLock is active, add special style to the Num Lock key itself */
  &[code="NumLock"].key-down {
    background-color: #4a90e2;
    box-shadow: inset 0 3px 6px rgba(0, 0, 0, 0.4);
  }

  /* When NumLock is inactive (navigation mode) - similar to Shift active state */
  &[code^="Numpad"]:not(.num-lock):not(.shift) .main-text {
    /* Navigation mode: main text (numbers) displays as gray secondary state */
    color: gray;
    font-size: 1em;
  }

  &[code^="Numpad"]:not(.num-lock):not(.shift) .shift-text {
    /* Navigation mode: shift text (navigation functions) displays as white active state */
    display: block !important;
    color: white;
    font-size: 0.75em;
    margin-bottom: 2px;
  }
}




/* Special key width adjustments */
virtual-key[code="Space"] {
  min-width: 200px;
  flex-grow: 2;
}

virtual-key[code="Backspace"] {
  min-width: 80px;
}

virtual-key[code="Tab"] {
  min-width: 60px;
}

virtual-key[code="CapsLock"] {
  min-width: 80px;
}

virtual-key[code="Enter"] {
  min-width: 80px;
}

virtual-key[code="ShiftLeft"],
virtual-key[code="ShiftRight"] {
  min-width: 100px;
}

virtual-key[code="ControlLeft"],
virtual-key[code="ControlRight"] {
  min-width: 60px;
}

virtual-key[code="AltLeft"],
virtual-key[code="AltRight"] {
  min-width: 60px;
}

virtual-key[code="MetaLeft"],
virtual-key[code="MetaRight"] {
  min-width: 60px;
}

virtual-key[code="ContextMenu"] {
  min-width: 60px;
}

/* Numeric keypad keys */
virtual-key[code="NumpadEnter"] {
  min-height: 100px;
}

virtual-key[code="Numpad0"] {
  min-width: 84px;
}