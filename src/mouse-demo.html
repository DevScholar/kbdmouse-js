<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mouse Demo - Drag Emulation</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f0f0f0;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .demo-area {
            background-color: white;
            border: 2px solid #ccc;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            min-height: 400px;
            position: relative;
            overflow: hidden;
        }
        
        .draggable {
            width: 100px;
            height: 100px;
            background-color: #4CAF50;
            border-radius: 8px;
            position: absolute;
            cursor: move;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }
        
        .draggable:hover {
            background-color: #45a049;
        }
        
        .draggable.dragging {
            background-color: #ff9800;
            z-index: 1000;
        }
        
        .controls {
            background-color: white;
            border: 2px solid #ccc;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .control-group {
            margin-bottom: 15px;
        }
        
        .control-group label {
            display: inline-block;
            width: 150px;
            font-weight: bold;
        }
        
        .control-group input[type="text"] {
            width: 300px;
            padding: 5px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        
        .control-group button {
            padding: 8px 16px;
            margin-right: 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        
        .btn-primary {
            background-color: #007bff;
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #0056b3;
        }
        
        .btn-secondary {
            background-color: white;
            color: black;
            border: 2px solid #333;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }
        
        .btn-secondary:hover {
            background-color: #f8f9fa;
            border-color: #000;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
        }
        
        .btn-success {
            background-color: #28a745;
            color: white;
        }
        
        .btn-success:hover {
            background-color: #1e7e34;
        }
        
        .btn-danger {
            background-color: #dc3545;
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #c82333;
        }
        
        .log-container {
            background-color: white;
            border: 2px solid #ccc;
            border-radius: 8px;
            padding: 20px;
        }
        
        .log-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .log-content {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 10px;
            height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            line-height: 1.4;
        }
        
        .log-entry {
            margin-bottom: 2px;
            padding: 2px 0;
        }
        
        .log-entry.mouse {
            color: #007bff;
        }
        
        .log-entry.touch {
            color: #28a745;
        }
        
        .log-entry.keyboard {
            color: #dc3545;
        }
        
        .log-entry.other {
            color: #6c757d;
        }
        
        .status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .status.enabled {
            background-color: #d4edda;
            color: #155724;
        }
        
        .status.disabled {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        /* Context menu styles */
        .context-menu {
            position: absolute;
            background-color: white;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 5px 0;
            min-width: 120px;
            z-index: 10000;
            display: none;
        }
        
        .context-menu-item {
            padding: 8px 15px;
            cursor: pointer;
            font-size: 14px;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
        }
        
        .context-menu-item:hover {
            background-color: #f0f0f0;
        }
        
        .context-menu-item.danger {
            color: #dc3545;
        }
        
        .context-menu-separator {
            height: 1px;
            background-color: #e0e0e0;
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Mouse Demo - Drag Emulation</h1>
        <p>This demo emulates mouse-based dragging without touch events, with optional mouse polyfill for touch devices.</p>
        
        <div class="controls">
            <div class="control-group">
                <label>Event Type Filter:</label>
                <input type="text" id="eventFilter" value="contextmenu,click,dblclick,mousedown,mousemove,mouseup,mouseenter,mouseleave,mouseover,mouseout,touchstart,touchmove,touchend,touchcancel" placeholder="Enter comma-separated event names (empty = all events)">
                <button id="resetFilter" class="btn-secondary">Reset to Default</button>
            </div>
            
            <div class="control-group">
                <label>Mouse Polyfill:</label>
                <span id="polyfillStatus" class="status disabled">DISABLED</span>
                <button id="togglePolyfill" class="btn-primary">Enable Polyfill</button>
                <button id="clearLog" class="btn-secondary">Clear Log</button>
            </div>
            
            <div class="control-group">
                <label>Vibration:</label>
                <span id="vibrateStatus" class="status enabled">ENABLED</span>
                <button id="toggleVibrate" class="btn-secondary">Disable Vibration</button>
            </div>
            
            <div class="control-group">
                <label>Debug Mode:</label>
                <span id="debugStatus" class="status disabled">DISABLED</span>
                <button id="toggleDebug" class="btn-secondary">Enable Debug</button>
            </div>
            
            <div class="control-group">
                <label>Demo Controls:</label>
                <button id="addDraggable" class="btn-success">Add Draggable</button>
                <button id="clearDraggables" class="btn-danger">Clear All</button>
            </div>
            
            <div class="control-group">
                <label>Testing:</label>
                <button id="testVibration" class="btn-secondary">Test Vibration</button>
        
            </div>
        </div>
        
        <div class="demo-area" id="demoArea">
            <div class="draggable" style="left: 50px; top: 50px;">Drag Me!</div>
        </div>
        
        <div class="log-container">
            <div class="log-header">
                <h3>Event Log (Max 100 entries)</h3>
                <span id="logCount">0/100</span>
            </div>
            <div class="log-content" id="logContent"></div>
        </div>
    </div>

    <!-- Context Menu -->
    <div id="contextMenu" class="context-menu">
        <button class="context-menu-item" id="menuAddDraggable">Add Draggable</button>
        <button class="context-menu-item" id="menuClearDraggables">Clear All Draggables</button>
        <div class="context-menu-separator"></div>
        <button class="context-menu-item" id="menuTogglePolyfill">Enable Polyfill</button>
        <button class="context-menu-item" id="menuClearLog">Clear Log</button>
        <div class="context-menu-separator"></div>
        <button class="context-menu-item danger" id="menuResetDemo">Reset Demo</button>
    </div>

    <script type="module">
        // Import mouse polyfill
        import { MousePolyfill } from './mouse-polyfill.js';
        
        class MouseDemo {
            constructor() {
                // Create mouse polyfill instance
                this.mousePolyfill = new MousePolyfill();
                
                this.logEntries = [];
                this.maxLogEntries = 100;
                this.polyfillEnabled = false;
                this.debugEnabled = false;
                this.vibrateEnabled = true;
                this.eventFilter = new Set();
                this.draggedElement = null;
                this.dragOffset = { x: 0, y: 0 };
                this.isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
                
                this.initializeElements();
                this.setupEventListeners();
                this.updateEventFilter();
                this.updatePolyfillButtonState();
                this.updateDebugButtonState();
                this.updateVibrateButtonState();
            }
            
            initializeElements() {
                this.demoArea = document.getElementById('demoArea');
                this.logContent = document.getElementById('logContent');
                this.logCount = document.getElementById('logCount');
                this.eventFilterInput = document.getElementById('eventFilter');
                this.resetFilterBtn = document.getElementById('resetFilter');
                this.togglePolyfillBtn = document.getElementById('togglePolyfill');
                this.clearLogBtn = document.getElementById('clearLog');
                this.addDraggableBtn = document.getElementById('addDraggable');
                this.clearDraggablesBtn = document.getElementById('clearDraggables');
                this.testVibrationBtn = document.getElementById('testVibration');
        
                this.polyfillStatus = document.getElementById('polyfillStatus');
                this.contextMenu = document.getElementById('contextMenu');
                this.menuAddDraggable = document.getElementById('menuAddDraggable');
                this.menuClearDraggables = document.getElementById('menuClearDraggables');
                this.menuTogglePolyfill = document.getElementById('menuTogglePolyfill');
                this.menuClearLog = document.getElementById('menuClearLog');
                this.menuResetDemo = document.getElementById('menuResetDemo');
                this.debugStatus = document.getElementById('debugStatus');
                this.toggleDebugBtn = document.getElementById('toggleDebug');
                this.vibrateStatus = document.getElementById('vibrateStatus');
                this.toggleVibrateBtn = document.getElementById('toggleVibrate');
            }
            
            setupEventListeners() {
                // Demo area mouse events
                this.demoArea.addEventListener('mousedown', this.handleMouseDown.bind(this));
                this.demoArea.addEventListener('mousemove', this.handleMouseMove.bind(this));
                this.demoArea.addEventListener('mouseup', this.handleMouseUp.bind(this));
                this.demoArea.addEventListener('mouseenter', this.handleMouseEnter.bind(this));
                this.demoArea.addEventListener('mouseleave', this.handleMouseLeave.bind(this));
                this.demoArea.addEventListener('mouseover', this.handleMouseOver.bind(this));
                this.demoArea.addEventListener('mouseout', this.handleMouseOut.bind(this));
                this.demoArea.addEventListener('click', this.handleClick.bind(this));
                this.demoArea.addEventListener('dblclick', this.handleDoubleClick.bind(this));
                this.demoArea.addEventListener('contextmenu', this.handleContextMenu.bind(this));
                
                // Demo area touch events (for polyfill testing)
                this.demoArea.addEventListener('touchstart', this.handleTouchStart.bind(this));
                this.demoArea.addEventListener('touchmove', this.handleTouchMove.bind(this));
                this.demoArea.addEventListener('touchend', this.handleTouchEnd.bind(this));
                this.demoArea.addEventListener('touchcancel', this.handleTouchCancel.bind(this));
                
                // Control buttons
                this.resetFilterBtn.addEventListener('click', this.resetEventFilter.bind(this));
                this.togglePolyfillBtn.addEventListener('click', this.togglePolyfill.bind(this));
                this.clearLogBtn.addEventListener('click', this.clearLog.bind(this));
                this.addDraggableBtn.addEventListener('click', this.addDraggable.bind(this));
                this.clearDraggablesBtn.addEventListener('click', this.clearDraggables.bind(this));
                this.toggleDebugBtn.addEventListener('click', this.toggleDebug.bind(this));
                this.toggleVibrateBtn.addEventListener('click', this.toggleVibrate.bind(this));
                
                // Test controls
                this.testVibrationBtn.addEventListener('click', this.testVibration.bind(this));
        
                
                // Event filter input
                this.eventFilterInput.addEventListener('input', this.updateEventFilter.bind(this));
                
                // Context menu events
                document.addEventListener('click', this.hideContextMenu.bind(this));
                this.contextMenu.addEventListener('click', this.handleContextMenuClick.bind(this));
                
                // Global mouse handlers for dragging
                document.addEventListener('mousemove', this.handleGlobalMouseMove.bind(this));
                document.addEventListener('mouseup', this.handleGlobalMouseUp.bind(this));
            }
            
            // Mouse event handlers
            handleMouseDown(event) {
                this.logEvent('mousedown', event);
                
                if (event.target.classList.contains('draggable')) {
                    this.startDrag(event.target, event.clientX, event.clientY);
                }
            }
            
            handleMouseMove(event) {
                this.logEvent('mousemove', event);
            }
            
            handleMouseUp(event) {
                this.logEvent('mouseup', event);
            }
            
            handleMouseEnter(event) {
                this.logEvent('mouseenter', event);
            }
            
            handleMouseLeave(event) {
                this.logEvent('mouseleave', event);
            }
            
            handleMouseOver(event) {
                this.logEvent('mouseover', event);
            }
            
            handleMouseOut(event) {
                this.logEvent('mouseout', event);
            }
            
            handleClick(event) {
                this.logEvent('click', event);
            }
            
            handleDoubleClick(event) {
                this.logEvent('dblclick', event);
            }
            
            handleContextMenu(event) {
                event.preventDefault();
                this.logEvent('contextmenu', event);
                
                console.log('ContextMenu event received:', {
                    clientX: event.clientX,
                    clientY: event.clientY,
                    isTrusted: event.isTrusted,
                    isPolyfill: event.isPolyfill
                });
                
                // Show custom context menu
                this.showContextMenu(event.clientX, event.clientY);
            }
            
            // Touch event handlers
            handleTouchStart(event) {
                this.logEvent('touchstart', event);
            }
            
            handleTouchMove(event) {
                this.logEvent('touchmove', event);
            }
            
            handleTouchEnd(event) {
                this.logEvent('touchend', event);
            }
            
            handleTouchCancel(event) {
                this.logEvent('touchcancel', event);
            }
            
            // Global mouse handlers for dragging
            handleGlobalMouseMove(event) {
                if (this.draggedElement) {
                    this.updateDrag(event.clientX, event.clientY);
                }
            }
            
            handleGlobalMouseUp(event) {
                if (this.draggedElement) {
                    this.endDrag();
                }
            }
            
            // Dragging functionality
            startDrag(element, clientX, clientY) {
                this.draggedElement = element;
                this.draggedElement.classList.add('dragging');
                
                const rect = this.draggedElement.getBoundingClientRect();
                this.dragOffset.x = clientX - rect.left;
                this.dragOffset.y = clientY - rect.top;
                
                this.logEvent('drag-start', { element: element.textContent });
            }
            
            updateDrag(clientX, clientY) {
                if (!this.draggedElement) return;
                
                const demoRect = this.demoArea.getBoundingClientRect();
                let x = clientX - demoRect.left - this.dragOffset.x;
                let y = clientY - demoRect.top - this.dragOffset.y;
                
                // Keep within bounds
                x = Math.max(0, Math.min(x, demoRect.width - this.draggedElement.offsetWidth));
                y = Math.max(0, Math.min(y, demoRect.height - this.draggedElement.offsetHeight));
                
                this.draggedElement.style.left = x + 'px';
                this.draggedElement.style.top = y + 'px';
            }
            
            endDrag() {
                if (this.draggedElement) {
                    this.draggedElement.classList.remove('dragging');
                    this.logEvent('drag-end', { element: this.draggedElement.textContent });
                    this.draggedElement = null;
                }
            }
            
            // Logging functionality
            logEvent(eventType, eventData) {
                if (!this.shouldLogEvent(eventType)) {
                    return;
                }
                
                const now = new Date();
                const timestamp = `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}:${now.getSeconds().toString().padStart(2, '0')}.${now.getMilliseconds().toString().padStart(3, '0')}`;
                let eventInfo = `${timestamp} - ${eventType}`;
                
                if (eventData instanceof MouseEvent) {
                    eventInfo += ` [${Math.round(eventData.clientX)}, ${Math.round(eventData.clientY)}]`;
                    eventInfo += ` button:${eventData.button} buttons:${eventData.buttons}`;
                    // Check if event is generated by polyfill
                    if (eventData.isTrusted === false || eventData.isPolyfill) {
                        eventInfo += ' [POLYFILL]';
                    }
                } else if (eventData instanceof TouchEvent) {
                    const touch = eventData.touches[0] || eventData.changedTouches[0];
                    if (touch) {
                        eventInfo += ` [${Math.round(touch.clientX)}, ${Math.round(touch.clientY)}]`;
                    }
                } else if (eventData && typeof eventData === 'object') {
                    eventInfo += ` ${JSON.stringify(eventData)}`;
                }
                
                this.addLogEntry(eventType, eventInfo);
            }
            
            shouldLogEvent(eventType) {
                if (this.eventFilter.size === 0) {
                    return true; // Log all events if filter is empty
                }
                return this.eventFilter.has(eventType);
            }
            
            addLogEntry(eventType, message) {
                this.logEntries.push({ type: eventType, message });
                
                // Keep only the last 100 entries
                if (this.logEntries.length > this.maxLogEntries) {
                    this.logEntries.shift();
                }
                
                this.updateLogDisplay();
            }
            
            updateLogDisplay() {
                this.logContent.innerHTML = '';
                
                this.logEntries.forEach(entry => {
                    const div = document.createElement('div');
                    div.className = `log-entry ${this.getEventCategory(entry.type)}`;
                    div.textContent = entry.message;
                    this.logContent.appendChild(div);
                });
                
                this.logContent.scrollTop = this.logContent.scrollHeight;
                this.logCount.textContent = `${this.logEntries.length}/${this.maxLogEntries}`;
            }
            
            getEventCategory(eventType) {
                if (eventType.startsWith('mouse') || eventType === 'drag-start' || eventType === 'drag-end' || eventType === 'click' || eventType === 'dblclick' || eventType === 'contextmenu') {
                    return 'mouse';
                } else if (eventType.startsWith('touch')) {
                    return 'touch';
                } else if (eventType.startsWith('key')) {
                    return 'keyboard';
                } else {
                    return 'other';
                }
            }
            
            clearLog() {
                this.logEntries = [];
                this.updateLogDisplay();
            }
            
            // Event filter functionality
            updateEventFilter() {
                const filterValue = this.eventFilterInput.value.trim();
                
                if (filterValue === '') {
                    this.eventFilter.clear();
                } else {
                    this.eventFilter = new Set(filterValue.split(',').map(s => s.trim()));
                }
            }
            
            resetEventFilter() {
                this.eventFilterInput.value = 'mousedown,mousemove,mouseup,mouseenter,mouseleave,mouseover,mouseout,click,dblclick,contextmenu,touchstart,touchmove,touchend,touchcancel';
                this.updateEventFilter();
            }
            
            // Polyfill functionality
            togglePolyfill() {
                this.polyfillEnabled = !this.polyfillEnabled;
                
                if (this.polyfillEnabled) {
                    this.mousePolyfill.addPolyfillFor(this.demoArea);
                    this.togglePolyfillBtn.textContent = 'Disable Polyfill';
                    this.polyfillStatus.textContent = 'ENABLED';
                    this.polyfillStatus.className = 'status enabled';
                } else {
                    this.mousePolyfill.removePolyfillFor(this.demoArea);
                    this.togglePolyfillBtn.textContent = 'Enable Polyfill';
                    this.polyfillStatus.textContent = 'DISABLED';
                    this.polyfillStatus.className = 'status disabled';
                }
                
                this.logEvent('polyfill-toggle', { enabled: this.polyfillEnabled });
            }
            
            // Update polyfill button state
            updatePolyfillButtonState() {
                if (!this.isTouchDevice) {
                    this.togglePolyfillBtn.disabled = true;
                    this.togglePolyfillBtn.title = 'Polyfill is only available on touch devices';
                    this.togglePolyfillBtn.style.cursor = 'not-allowed';
                } else {
                    this.togglePolyfillBtn.disabled = false;
                    this.togglePolyfillBtn.title = '';
                    this.togglePolyfillBtn.style.cursor = 'pointer';
                }
            }

            // Debug mode control
            toggleDebug() {
                this.debugEnabled = !this.debugEnabled;
                
                // Set mouse polyfill debug state
                this.mousePolyfill.debug = this.debugEnabled;
                
                if (this.debugEnabled) {
                    this.toggleDebugBtn.textContent = 'Disable Debug';
                    this.debugStatus.textContent = 'ENABLED';
                    this.debugStatus.className = 'status enabled';
                } else {
                    this.toggleDebugBtn.textContent = 'Enable Debug';
                    this.debugStatus.textContent = 'DISABLED';
                    this.debugStatus.className = 'status disabled';
                }
                
                this.logEvent('debug-toggle', { enabled: this.debugEnabled });
            }
            
            // Update debug button state
            updateDebugButtonState() {
                if (this.debugEnabled) {
                    this.toggleDebugBtn.textContent = 'Disable Debug';
                    this.debugStatus.textContent = 'ENABLED';
                    this.debugStatus.className = 'status enabled';
                } else {
                    this.toggleDebugBtn.textContent = 'Enable Debug';
                    this.debugStatus.textContent = 'DISABLED';
                    this.debugStatus.className = 'status disabled';
                }
            }
            
            // Vibration control
            toggleVibrate() {
                this.vibrateEnabled = !this.vibrateEnabled;
                
                // Set mouse polyfill vibration state
                this.mousePolyfill.vibrate = this.vibrateEnabled;
                
                if (this.vibrateEnabled) {
                    this.toggleVibrateBtn.textContent = 'Disable Vibration';
                    this.vibrateStatus.textContent = 'ENABLED';
                    this.vibrateStatus.className = 'status enabled';
                } else {
                    this.toggleVibrateBtn.textContent = 'Enable Vibration';
                    this.vibrateStatus.textContent = 'DISABLED';
                    this.vibrateStatus.className = 'status disabled';
                }
                
                this.logEvent('vibration-toggle', { enabled: this.vibrateEnabled });
            }
            
            // Update vibration button state
            updateVibrateButtonState() {
                if (this.vibrateEnabled) {
                    this.toggleVibrateBtn.textContent = 'Disable Vibration';
                    this.vibrateStatus.textContent = 'ENABLED';
                    this.vibrateStatus.className = 'status enabled';
                } else {
                    this.toggleVibrateBtn.textContent = 'Enable Vibration';
                    this.vibrateStatus.textContent = 'DISABLED';
                    this.vibrateStatus.className = 'status disabled';
                }
            }
            
            // Draggable management
            addDraggable() {
                const draggable = document.createElement('div');
                draggable.className = 'draggable';
                draggable.textContent = 'Drag Me!';
                
                // Random position within demo area
                const demoRect = this.demoArea.getBoundingClientRect();
                const maxX = demoRect.width - 100;
                const maxY = demoRect.height - 100;
                
                draggable.style.left = Math.random() * maxX + 'px';
                draggable.style.top = Math.random() * maxY + 'px';
                
                this.demoArea.appendChild(draggable);
                this.logEvent('add-draggable', { count: this.demoArea.querySelectorAll('.draggable').length });
            }
            
            clearDraggables() {
                const draggables = this.demoArea.querySelectorAll('.draggable');
                draggables.forEach(draggable => draggable.remove());
                this.logEvent('clear-draggables', { count: 0 });
            }
            
            // Context menu functionality
            showContextMenu(clientX, clientY) {
                this.contextMenu.style.left = clientX + 'px';
                this.contextMenu.style.top = clientY + 'px';
                this.contextMenu.style.display = 'block';
                
                // Update menu item text based on current state
                this.menuTogglePolyfill.textContent = this.polyfillEnabled ? 'Disable Polyfill' : 'Enable Polyfill';
            }
            
            hideContextMenu() {
                this.contextMenu.style.display = 'none';
            }
            
            handleContextMenuClick(event) {
                const target = event.target;
                
                if (target === this.menuAddDraggable) {
                    this.addDraggable();
                } else if (target === this.menuClearDraggables) {
                    this.clearDraggables();
                } else if (target === this.menuTogglePolyfill) {
                    this.togglePolyfill();
                } else if (target === this.menuClearLog) {
                    this.clearLog();
                } else if (target === this.menuResetDemo) {
                    this.resetDemo();
                }
                
                this.hideContextMenu();
            }
            
            // Reset demo to initial state
            resetDemo() {
                this.clearDraggables();
                this.clearLog();
                this.addDraggable();
                if (this.polyfillEnabled) {
                    this.togglePolyfill();
                }
                if (!this.vibrateEnabled) {
                    this.toggleVibrate();
                }
                this.resetEventFilter();
                this.logEvent('demo-reset', { message: 'Demo reset to initial state' });
            }
            
            // Test vibration functionality
            testVibration() {
                if ('vibrate' in navigator) {
                    try {
                        navigator.vibrate(200);
                        this.logEvent('vibration-test', { duration: 200, success: true });
                        console.log('Vibration test: 200ms');
                    } catch (error) {
                        this.logEvent('vibration-test', { error: error.message, success: false });
                        console.log('Vibration test failed:', error);
                    }
                } else {
                    this.logEvent('vibration-test', { error: 'Vibration not supported', success: false });
                    console.log('Vibration not supported');
                }
            }
        }
        
        // Initialize the demo when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            new MouseDemo();
        });
    </script>
</body>
</html>